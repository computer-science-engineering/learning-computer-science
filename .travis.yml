dist: xenial

language: java

jdk:
  - openjdk13

branches:
  only:
    - master

before_install:
  - sudo add-apt-repository ppa:deadsnakes/ppa -y
  - sudo apt-get update -y
  - sudo apt-get install python3.8 -y
  - chmod +x gradlew

script:
  - bash ./gradlew test jacocoJupTestReport
  - python3.8 --version
  - pyenv versions
  - pyenv update
  - pyenv global 3.8.0
  - pip install --upgrade pip
  - pip install -r requirements.txt
  - coverage3 run scripts/run_unit_tests.py
  - python3.8 scripts/create_problems_list.py

#https://caveofcode.com/2017/05/publish-an-angular-app-to-github-pages/
deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN
  keep_history: false
  commit_message: Travis CI Updates [ci skip]
  local_dir: website
  on:
    branch: master
  target_branch: gh-pages
